{% extends 'base.html' %}

{% block title %}Admin Dashboard - USIU LMS{% endblock %}

{% block content %}
<div style="max-width: 1400px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <div>
            <h2 style="margin-bottom: 0.5rem;">Admin Dashboard</h2>
            <p style="color: var(--text-secondary); margin: 0;">System-wide management and statistics</p>
        </div>
        <a href="{% url 'admin_users' %}" class="btn-primary">
            Manage Users
        </a>
    </div>

    <!-- User Statistics -->
    <div style="margin-bottom: 3rem;">
        <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">User Statistics</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem;">
            <div class="stat-card" style="border-left: 4px solid var(--accent-primary);">
                <div class="stat-label">Total Users</div>
                <div class="stat-value">{{ total_users }}</div>
            </div>
            <div class="stat-card" style="border-left: 4px solid var(--accent-success);">
                <div class="stat-label">Students</div>
                <div class="stat-value">{{ students }}</div>
            </div>
            <div class="stat-card" style="border-left: 4px solid var(--accent-purple);">
                <div class="stat-label">Instructors</div>
                <div class="stat-value">{{ instructors }}</div>
            </div>
            <div class="stat-card" style="border-left: 4px solid var(--accent-error);">
                <div class="stat-label">Admins</div>
                <div class="stat-value">{{ admins }}</div>
            </div>
            <div class="stat-card" style="border-left: 4px solid var(--accent-teal);">
                <div class="stat-label">New Users (30 days)</div>
                <div class="stat-value">{{ recent_users }}</div>
            </div>
        </div>
    </div>

    <!-- Course & Assignment Statistics -->
    <div style="margin-bottom: 3rem;">
        <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">Content Statistics</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem;">
            <div class="stat-card" style="border-left: 4px solid var(--accent-primary);">
                <div class="stat-label">Total Courses</div>
                <div class="stat-value">{{ total_courses }}</div>
            </div>
            <div class="stat-card" style="border-left: 4px solid var(--accent-success);">
                <div class="stat-label">Active Courses</div>
                <div class="stat-value">{{ active_courses }}</div>
            </div>
            <div class="stat-card" style="border-left: 4px solid var(--accent-orange);">
                <div class="stat-label">Total Assignments</div>
                <div class="stat-value">{{ total_assignments }}</div>
            </div>
        </div>
    </div>

    <!-- AI & Live Stream Statistics -->
    <div style="margin-bottom: 3rem;">
        <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">Platform Features</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem;">
            <div class="stat-card" style="border-left: 4px solid var(--accent-purple);">
                <div class="stat-label">AI Interactions</div>
                <div class="stat-value">{{ ai_interactions }}</div>
                <div style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem;">
                    {{ recent_ai_interactions }} in last 30 days
                </div>
            </div>
            <div class="stat-card" style="border-left: 4px solid var(--accent-error);">
                <div class="stat-label">Live Streams</div>
                <div class="stat-value">{{ total_streams }}</div>
                <div style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem;">
                    {{ live_streams }} currently live
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="card">
        <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">Quick Actions</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <a href="{% url 'admin_users' %}" class="action-card">
                <div class="action-icon" style="background-color: rgba(26, 115, 232, 0.1); color: var(--accent-primary);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <div class="action-title">Manage Users</div>
                <div class="action-description">View and manage all users</div>
            </a>
            <a href="/admin/" class="action-card">
                <div class="action-icon" style="background-color: rgba(52, 168, 83, 0.1); color: var(--accent-success);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m-9-9h6m6 0h6"></path>
                    </svg>
                </div>
                <div class="action-title">Django Admin</div>
                <div class="action-description">Access Django admin panel</div>
            </a>
            <a href="{% url 'home' %}" class="action-card">
                <div class="action-icon" style="background-color: rgba(147, 52, 230, 0.1); color: var(--accent-purple);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </div>
                <div class="action-title">Main Site</div>
                <div class="action-description">View as regular user</div>
            </a>
        </div>
    </div>
</div>

<style>
    .btn-primary {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background-color: var(--accent-primary);
        color: white;
        text-decoration: none;
        border-radius: 4px;
        font-weight: 500;
        transition: background-color 0.2s;
    }
    .btn-primary:hover {
        background-color: #1557b0;
    }

    .action-card {
        padding: 1.5rem;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        text-decoration: none;
        color: var(--text-primary);
        transition: all 0.2s;
        display: block;
    }
    .action-card:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
        border-color: var(--accent-primary);
    }
    .action-icon {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
    }
    .action-title {
        font-size: 1rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
    }
    .action-description {
        font-size: 0.875rem;
        color: var(--text-secondary);
    }
</style>
{% endblock %}
